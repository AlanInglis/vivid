<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>pdpPairs — pdpPairs • vivid</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="pdpPairs — pdpPairs" />
<meta property="og:description" content="Creates a pairs plot showing bivariate pdp on upper diagonal, ice/univariate pdp on the diagonal and data on the lower diagonal" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">vivid</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/A:vividVignette.html">vivid: Variable Importance and Variable Interaction Displays</a>
    </li>
    <li>
      <a href="../articles/B:randomForestVivid.html">randomForest - Random Forest</a>
    </li>
    <li>
      <a href="../articles/C:rangerVivid.html">ranger - Random Forest</a>
    </li>
    <li>
      <a href="../articles/D:bartMachineVivid.html">bartMachine - BART</a>
    </li>
    <li>
      <a href="../articles/E:caretVivid.html">caret - Neural Network</a>
    </li>
    <li>
      <a href="../articles/F:mlrVivid.html">mlr3 - k-nearest Neighbours</a>
    </li>
    <li>
      <a href="../articles/G:svmVivid.html">e1071 - Support Vector Machine</a>
    </li>
    <li>
      <a href="../articles/H:gbmVivid.html">gbm - Generalized Boosted Model</a>
    </li>
    <li>
      <a href="../articles/I:kerasVivid.html">keras - Neural Network</a>
    </li>
    <li>
      <a href="../articles/J:xgbVivid.html">xgboost - Gradient Boosting</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>pdpPairs</h1>
    
    <div class="hidden name"><code>pdpPairs.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Creates a pairs plot showing bivariate pdp on upper diagonal, ice/univariate pdp on the diagonal and data on the lower diagonal</p>
    </div>

    <pre class="usage"><span><span class='fu'>pdpPairs</span><span class='op'>(</span></span>
<span>  <span class='va'>data</span>,</span>
<span>  <span class='va'>fit</span>,</span>
<span>  <span class='va'>response</span>,</span>
<span>  vars <span class='op'>=</span> <span class='cn'>NULL</span>,</span>
<span>  pal <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rev.html'>rev</a></span><span class='op'>(</span><span class='fu'>RColorBrewer</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html'>brewer.pal</a></span><span class='op'>(</span><span class='fl'>11</span>, <span class='st'>"RdYlBu"</span><span class='op'>)</span><span class='op'>)</span>,</span>
<span>  fitlims <span class='op'>=</span> <span class='st'>"pdp"</span>,</span>
<span>  gridSize <span class='op'>=</span> <span class='fl'>10</span>,</span>
<span>  nmax <span class='op'>=</span> <span class='fl'>500</span>,</span>
<span>  class <span class='op'>=</span> <span class='fl'>1</span>,</span>
<span>  nIce <span class='op'>=</span> <span class='fl'>30</span>,</span>
<span>  colorVar <span class='op'>=</span> <span class='cn'>NULL</span>,</span>
<span>  comboImage <span class='op'>=</span> <span class='cn'>FALSE</span>,</span>
<span>  predictFun <span class='op'>=</span> <span class='cn'>NULL</span>,</span>
<span>  convexHull <span class='op'>=</span> <span class='cn'>FALSE</span>,</span>
<span>  probability <span class='op'>=</span> <span class='cn'>FALSE</span></span>
<span><span class='op'>)</span></span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>Data frame used for fit.</p></td>
    </tr>
    <tr>
      <th>fit</th>
      <td><p>A supervised machine learning model, which understands condvis2::CVpredict</p></td>
    </tr>
    <tr>
      <th>response</th>
      <td><p>The name of the response for the fit.</p></td>
    </tr>
    <tr>
      <th>vars</th>
      <td><p>The variables to plot (and their order), defaults to all variables other than response.</p></td>
    </tr>
    <tr>
      <th>pal</th>
      <td><p>A vector of colors to show predictions, for use with scale_fill_gradientn</p></td>
    </tr>
    <tr>
      <th>fitlims</th>
      <td><p>Specifies the fit range for the color map. Options are a numeric vector of length 2,
"pdp" (default), in which cases limits are calculated from the pdp, or "all", when limits are calculated from the observations and pdp.
Predictions outside fitlims are squished on the color scale.</p></td>
    </tr>
    <tr>
      <th>gridSize</th>
      <td><p>The size of the grid for evaluating the predictions.</p></td>
    </tr>
    <tr>
      <th>nmax</th>
      <td><p>Uses sample of nmax data rows for the pdp.  Default is 500. Use all rows if NULL.</p></td>
    </tr>
    <tr>
      <th>class</th>
      <td><p>Category for classification, a factor level, or a number indicating which factor level.</p></td>
    </tr>
    <tr>
      <th>nIce</th>
      <td><p>Number of ice curves to be plotted, defaults to 30.</p></td>
    </tr>
    <tr>
      <th>colorVar</th>
      <td><p>Which variable to colour the predictions by.</p></td>
    </tr>
    <tr>
      <th>comboImage</th>
      <td><p>If TRUE  draws pdp for mixed variable plots as an image, otherwise an interaction plot.</p></td>
    </tr>
    <tr>
      <th>predictFun</th>
      <td><p>Function of (fit, data) to extract numeric predictions from fit. Uses condvis2::CVpredict by default, which works for many fit classes.</p></td>
    </tr>
    <tr>
      <th>convexHull</th>
      <td><p>If TRUE, then the convex hull is computed and any points outside the convex hull are removed.</p></td>
    </tr>
    <tr>
      <th>probability</th>
      <td><p>if TRUE, then returns the partial dependence for classification on the probability scale. If
FALSE (default), then the partial dependence is returned on a near logit scale.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A pairs plot</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'><span><span class='co'># Load in the data:</span></span></span>
<span class='r-in'><span><span class='va'>aq</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/na.fail.html'>na.omit</a></span><span class='op'>(</span><span class='va'>airquality</span><span class='op'>)</span></span></span>
<span class='r-in'><span><span class='va'>f</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>Ozone</span> <span class='op'>~</span> <span class='va'>.</span>, data <span class='op'>=</span> <span class='va'>aq</span><span class='op'>)</span></span></span>
<span class='r-in'><span><span class='fu'>pdpPairs</span><span class='op'>(</span><span class='va'>aq</span>, <span class='va'>f</span>, <span class='st'>"Ozone"</span><span class='op'>)</span></span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Generating ice/pdp fits... waiting...</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Finished ice/pdp</span>
<span class='r-plt img'><img src='pdpPairs-1.png' alt='' width='700' height='433' /></span>
<span class='r-in'><span><span class='co'># \donttest{</span></span></span>
<span class='r-in'><span><span class='co'># Run a ranger model:</span></span></span>
<span class='r-in'><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/imbs-hl/ranger'>ranger</a></span><span class='op'>)</span></span></span>
<span class='r-in'><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://www.stats.ox.ac.uk/pub/MASS4/'>MASS</a></span><span class='op'>)</span></span></span>
<span class='r-in'><span><span class='va'>Boston1</span> <span class='op'>&lt;-</span> <span class='va'>Boston</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>4</span><span class='op'>:</span><span class='fl'>6</span>, <span class='fl'>8</span>, <span class='fl'>13</span><span class='op'>:</span><span class='fl'>14</span><span class='op'>)</span><span class='op'>]</span></span></span>
<span class='r-in'><span><span class='va'>Boston1</span><span class='op'>$</span><span class='va'>chas</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>Boston1</span><span class='op'>$</span><span class='va'>chas</span><span class='op'>)</span></span></span>
<span class='r-in'><span><span class='va'>fit</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/ranger/man/ranger.html'>ranger</a></span><span class='op'>(</span><span class='va'>medv</span> <span class='op'>~</span> <span class='va'>.</span>, data <span class='op'>=</span> <span class='va'>Boston1</span>, importance <span class='op'>=</span> <span class='st'>"permutation"</span><span class='op'>)</span></span></span>
<span class='r-in'><span><span class='fu'>pdpPairs</span><span class='op'>(</span><span class='va'>Boston1</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>30</span>, <span class='op'>]</span>, <span class='va'>fit</span>, <span class='st'>"medv"</span><span class='op'>)</span></span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Generating ice/pdp fits... waiting...</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Finished ice/pdp</span>
<span class='r-plt img'><img src='pdpPairs-2.png' alt='' width='700' height='433' /></span>
<span class='r-in'><span><span class='fu'>pdpPairs</span><span class='op'>(</span><span class='va'>Boston1</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>30</span>, <span class='op'>]</span>, <span class='va'>fit</span>, <span class='st'>"medv"</span>, comboImage <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Generating ice/pdp fits... waiting...</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Finished ice/pdp</span>
<span class='r-plt img'><img src='pdpPairs-3.png' alt='' width='700' height='433' /></span>
<span class='r-in'><span><span class='va'>viv</span> <span class='op'>&lt;-</span> <span class='fu'><a href='vivi.html'>vivi</a></span><span class='op'>(</span><span class='va'>Boston1</span>, <span class='va'>fit</span>, <span class='st'>"medv"</span><span class='op'>)</span></span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Agnostic variable importance method used.</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Calculating interactions...</span>
<span class='r-in'><span><span class='co'># show top variables only</span></span></span>
<span class='r-in'><span><span class='fu'>pdpPairs</span><span class='op'>(</span><span class='va'>Boston1</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>30</span>, <span class='op'>]</span>, <span class='va'>fit</span>, <span class='st'>"medv"</span>, comboImage <span class='op'>=</span> <span class='cn'>TRUE</span>, vars <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span><span class='op'>(</span><span class='va'>viv</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span><span class='op'>]</span><span class='op'>)</span></span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Generating ice/pdp fits... waiting...</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Finished ice/pdp</span>
<span class='r-plt img'><img src='pdpPairs-4.png' alt='' width='700' height='433' /></span>
<span class='r-in'><span><span class='co'># }</span></span></span>
<span class='r-in'><span><span class='co'># \donttest{</span></span></span>
<span class='r-in'><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/imbs-hl/ranger'>ranger</a></span><span class='op'>)</span></span></span>
<span class='r-in'><span><span class='va'>rf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/ranger/man/ranger.html'>ranger</a></span><span class='op'>(</span><span class='va'>Species</span> <span class='op'>~</span> <span class='va'>.</span>, data <span class='op'>=</span> <span class='va'>iris</span>, probability <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></span></span>
<span class='r-in'><span><span class='fu'>pdpPairs</span><span class='op'>(</span><span class='va'>iris</span>, <span class='va'>rf</span>, <span class='st'>"Species"</span><span class='op'>)</span> <span class='co'># prediction probs for first class, setosa</span></span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Generating ice/pdp fits... waiting...</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Finished ice/pdp</span>
<span class='r-plt img'><img src='pdpPairs-5.png' alt='' width='700' height='433' /></span>
<span class='r-in'><span><span class='fu'>pdpPairs</span><span class='op'>(</span><span class='va'>iris</span>, <span class='va'>rf</span>, <span class='st'>"Species"</span>, class <span class='op'>=</span> <span class='st'>"versicolor"</span><span class='op'>)</span> <span class='co'># prediction probs versicolor</span></span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Generating ice/pdp fits... waiting...</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Finished ice/pdp</span>
<span class='r-plt img'><img src='pdpPairs-6.png' alt='' width='700' height='433' /></span>
<span class='r-in'><span><span class='co'># }</span></span></span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Alan Inglis, Andrew Parnell, Catherine Hurley.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


