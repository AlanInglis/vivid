<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Create a zenplot displaying partial dependence values. — pdpZen • vivid</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Create a zenplot displaying partial dependence values. — pdpZen"><meta property="og:description" content="Constructs a zigzag expanded navigation plot (zenplot) displaying partial dependence values."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">vivid</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/bartMachineVivid.html">bartMachine - BART</a>
    </li>
    <li>
      <a href="../articles/caretVivid.html">caret - Neural Network</a>
    </li>
    <li>
      <a href="../articles/gbmVivid.html">gbm - Generalized Boosted Model</a>
    </li>
    <li>
      <a href="../articles/kerasVivid.html">keras - Neural Network</a>
    </li>
    <li>
      <a href="../articles/mlrVivid.html">mlr3 - k-nearest Neighbours</a>
    </li>
    <li>
      <a href="../articles/randomForestVivid.html">randomForest - Random Forest</a>
    </li>
    <li>
      <a href="../articles/rangerVivid.html">ranger - Random Forest</a>
    </li>
    <li>
      <a href="../articles/svmVivid.html">e1071 - Support Vector Machine</a>
    </li>
    <li>
      <a href="../articles/vividVignette.html">vivid: Variable Importance and Variable Interaction Displays</a>
    </li>
    <li>
      <a href="../articles/xgbVivid.html">xgboost - Gradient Boosting</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a zenplot displaying partial dependence values.</h1>

    <div class="hidden name"><code>pdpZen.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Constructs a zigzag expanded navigation plot (zenplot) displaying partial dependence values.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">pdpZen</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">fit</span>,</span>
<span>  <span class="va">response</span>,</span>
<span>  zpath <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html" class="external-link">rev</a></span><span class="op">(</span><span class="fu">RColorBrewer</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html" class="external-link">brewer.pal</a></span><span class="op">(</span><span class="fl">11</span>, <span class="st">"RdYlBu"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  fitlims <span class="op">=</span> <span class="st">"pdp"</span>,</span>
<span>  gridSize <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  nmax <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  class <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  comboImage <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  rug <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  predictFun <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  convexHull <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  probability <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Data frame used for fit</p></dd>


<dt id="arg-fit">fit<a class="anchor" aria-label="anchor" href="#arg-fit"></a></dt>
<dd><p>A supervised machine learning model, which understands condvis2::CVpredict</p></dd>


<dt id="arg-response">response<a class="anchor" aria-label="anchor" href="#arg-response"></a></dt>
<dd><p>The name of the response for the fit</p></dd>


<dt id="arg-zpath">zpath<a class="anchor" aria-label="anchor" href="#arg-zpath"></a></dt>
<dd><p>Plot shows consecutive pairs of these variables. Defaults to all variables other than response.
Recommend constructing zpath witn <code>calcZpath</code>.</p></dd>


<dt id="arg-pal">pal<a class="anchor" aria-label="anchor" href="#arg-pal"></a></dt>
<dd><p>A vector of colors to show predictions, for use with scale_fill_gradientn</p></dd>


<dt id="arg-fitlims">fitlims<a class="anchor" aria-label="anchor" href="#arg-fitlims"></a></dt>
<dd><p>Specifies the fit range for the color map. Options are a numeric vector of length 2,
"pdp" (default), in which cases limits are calculated from the pdp, or "all", when limits are calculated from the observations and pdp
predictions outside fitlims are squished on the color scale.</p></dd>


<dt id="arg-gridsize">gridSize<a class="anchor" aria-label="anchor" href="#arg-gridsize"></a></dt>
<dd><p>The size of the grid for evaluating the predictions.</p></dd>


<dt id="arg-nmax">nmax<a class="anchor" aria-label="anchor" href="#arg-nmax"></a></dt>
<dd><p>Uses sample of nmax data rows for the pdp.  Default is 500. Use all rows if NULL.</p></dd>


<dt id="arg-class">class<a class="anchor" aria-label="anchor" href="#arg-class"></a></dt>
<dd><p>Category for classification, a factor level, or a number indicating which factor level.</p></dd>


<dt id="arg-comboimage">comboImage<a class="anchor" aria-label="anchor" href="#arg-comboimage"></a></dt>
<dd><p>If TRUE  draws pdp for mixed variable plots as an image, otherwise an interaction plot.</p></dd>


<dt id="arg-rug">rug<a class="anchor" aria-label="anchor" href="#arg-rug"></a></dt>
<dd><p>If TRUE adds rugs for the data to the pdp plots</p></dd>


<dt id="arg-predictfun">predictFun<a class="anchor" aria-label="anchor" href="#arg-predictfun"></a></dt>
<dd><p>Function of (fit, data) to extract numeric predictions from fit. Uses condvis2::CVpredict by default, which works for many fit classes.</p></dd>


<dt id="arg-convexhull">convexHull<a class="anchor" aria-label="anchor" href="#arg-convexhull"></a></dt>
<dd><p>If TRUE, then the convex hull is computed and any points outside the convex hull are removed.</p></dd>


<dt id="arg-probability">probability<a class="anchor" aria-label="anchor" href="#arg-probability"></a></dt>
<dd><p>if TRUE, then returns the partial dependence for classification on the probability scale. If
FALSE (default), then the partial dependence is returned on a near logit scale.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>passed on to zenplot</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A zenplot of partial dependence values.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># To use this function, install zenplots and graph from Bioconductor.</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"graph"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"BiocManager"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">BiocManager</span><span class="fu">::</span><span class="fu">install</span><span class="op">(</span><span class="st">"graph"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"zenplots"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://www.stats.ox.ac.uk/pub/MASS4/" class="external-link">MASS</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://imbs-hl.github.io/ranger/" class="external-link">ranger</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Boston1</span> <span class="op">&lt;-</span> <span class="va">Boston</span></span></span>
<span class="r-in"><span><span class="va">Boston1</span><span class="op">$</span><span class="va">chas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">Boston1</span><span class="op">$</span><span class="va">chas</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://imbs-hl.github.io/ranger/reference/ranger.html" class="external-link">ranger</a></span><span class="op">(</span><span class="va">medv</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">Boston1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">pdpZen</span><span class="op">(</span><span class="va">Boston1</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">30</span>, <span class="op">]</span>, <span class="va">rf</span>, response <span class="op">=</span> <span class="st">"medv"</span>, zpath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">Boston1</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>, comboImage <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Find the top variables in rf</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">viv</span> <span class="op">&lt;-</span> <span class="fu"><a href="vivi.html">vivi</a></span><span class="op">(</span><span class="va">Boston1</span>, <span class="va">rf</span>, <span class="st">"medv"</span>, nmax <span class="op">=</span> <span class="fl">30</span><span class="op">)</span> <span class="co"># use 30 rows, for speed</span></span></span>
<span class="r-in"><span><span class="fu">pdpZen</span><span class="op">(</span><span class="va">Boston1</span>, <span class="va">rf</span>, response <span class="op">=</span> <span class="st">"medv"</span>, zpath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">viv</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>, comboImage <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">zpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="zPath.html">zPath</a></span><span class="op">(</span><span class="va">viv</span>, cutoff <span class="op">=</span> <span class="fl">.2</span><span class="op">)</span> <span class="co"># find plots whose interaction score exceeds .2</span></span></span>
<span class="r-in"><span><span class="fu">pdpZen</span><span class="op">(</span><span class="va">Boston1</span>, <span class="va">rf</span>, response <span class="op">=</span> <span class="st">"medv"</span>, zpath <span class="op">=</span> <span class="va">zpath</span>, comboImage <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Alan Inglis, Andrew Parnell, Catherine Hurley.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

